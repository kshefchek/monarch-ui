(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"2d3b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid monarch-view",attrs:{id:"monarch-search-container"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"container col-md-3"},[t.categoryFilters.length>0||t.taxonFilters.length>0?s("div",{staticClass:"row card"},[s("div",{staticClass:"card-header py-2"},[t._v(" Filters ")]),t.categoryFilters.length>0?s("div",{staticClass:"px-2"},[s("div",{staticClass:"font-weight-bold"},[t._v(" Categories ")]),s("ul",t._l(t.categoryFilters,(function(e){return s("li",{key:e,staticClass:"row",attrs:{href:""}},[t._v(" "+t._s(t.biolinkCategory(e))+" "),s("button",{staticClass:"fa fa-remove",on:{click:function(s){return t.removeCategoryFilter(e)}}})])})),0)]):t._e(),t.taxonFilters.length>0?s("div",{staticClass:"px-2"},[s("div",{staticClass:"font-weight-bold"},[t._v(" Taxa ")]),s("ul",t._l(t.taxonFilters,(function(e){return s("li",{key:e,staticClass:"row",attrs:{href:""}},[t._v(" "+t._s(e)+" "),s("button",{staticClass:"fa fa-remove",on:{click:function(s){return t.removeTaxonFilter(e)}}})])})),0)]):t._e()]):t._e(),s("div",{staticClass:"row card",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"card-header py-1"},[t._v(" Categories ")]),s("div",{staticClass:"card-body py-1"},[s("ul",{staticClass:"showFacetLinks col-md-12"},t._l(t.facetCategories,(function(e,a){return s("li",{key:a,staticClass:"border-top border-bottom"},[s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.addCategoryFilter(a)}}},[t._v(" "+t._s(t.biolinkCategory(a))+" "),s("div",{staticClass:"pull-right"},[t._v(" "+t._s(e)+" ")]),s("div",{staticClass:"clearfix"})])])})),0)])]),s("div",{staticClass:"row card",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"card-header py-1"},[t._v(" Taxa ")]),s("div",{staticClass:"card-body py-1"},[s("ul",{staticClass:"showFacetLinks col-md-12"},t._l(t.facetTaxons,(function(e,a){return s("li",{key:a,staticClass:"border-top border-bottom"},[s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.addTaxonFilter(a)}}},[t._v(" "+t._s(a)+" "),s("div",{staticClass:"pull-right"},[t._v(" "+t._s(e)+" ")]),s("div",{staticClass:"clearfix"})])])})),0)])])]),s("div",{staticClass:"col-md-8"},[s("b-pagination",{staticClass:"table-sm table-border-soft mt-2",attrs:{"total-rows":t.numFound,"per-page":t.rowsPerPage,responsive:"true",size:"md"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),s("div",{staticClass:"search-results-rows"},[t.searchResults&&t.searchResults.length>0?s("div",[s("h3",[s("span",{staticClass:"searchTerm"},[t._v(t._s(t.query))]),t._v(" has "),s("span",{staticClass:"searchTerm"},[t._v(t._s(t.numFound))]),t._v(" matches ")]),s("b-table",{ref:"results-table",staticClass:"table-sm table-border-soft test-search-results-table",attrs:{fields:t.fields,items:t.rowsProvider,"current-page":t.currentPage,"per-page":t.rowsPerPage,striped:"",responsive:"true",hover:""},scopedSlots:t._u([{key:"cell(label)",fn:function(e){return[s("router-link",{attrs:{to:e.item.toLink}},[s("span",{domProps:{innerHTML:t._s(e.item.label)}})])]}},{key:"cell(highlight)",fn:function(e){return[s("span",{domProps:{innerHTML:t._s(e.item.highlight)}})]}}],null,!1,2943774411)})],1):t._e()])],1)])])},r=[],i=s("a34a"),n=s.n(i),o=s("a74f"),c=s("9054");function l(t,e,s,a,r,i,n){try{var o=t[i](n),c=o.value}catch(l){return void s(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function u(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var i=t.apply(e,s);function n(t){l(i,a,r,n,o,"next",t)}function o(t){l(i,a,r,n,o,"throw",t)}n(void 0)}))}}var h=25,d={name:"Search",data:function(){return{facets:[],user_facets:{},results:[],highlight:{},searchResults:[],currentPage:1,rowsPerPage:h,categoryFilters:[],taxonFilters:[],facetCategories:{},facetTaxons:{},numFound:0,numRowsDisplayed:0,selenium_id:"",searching:!0,fields:[{key:"label",label:"Term"},{key:"category",label:"Category"},{key:"taxon",label:"Taxon"},{key:"highlight",label:"Matching String"}]}},watch:{$route:function(t,e){this.searchViaRouteParams(),this.updateResultsTable()}},mounted:function(){this.searchViaRouteParams()},methods:{updateResultsTable:function(){this.$refs["results-table"]&&this.$refs["results-table"].refresh()},biolinkCategory:function(t){return Object(c["a"])([t])},addTaxonFilter:function(t){this.taxonFilters.push(t),this.search(),this.updateResultsTable()},removeTaxonFilter:function(t){this.taxonFilters=this.taxonFilters.filter((function(e){return e!==t})),this.search(),this.updateResultsTable()},addCategoryFilter:function(t){this.categoryFilters.push(t),this.search(),this.updateResultsTable()},removeCategoryFilter:function(t){this.categoryFilters=this.categoryFilters.filter((function(e){return e!==t})),this.search(),this.updateResultsTable()},searchViaRouteParams:function(){this.query=this.$route.params.query,this.rowsPerPage=this.$route.params.rows?this.$route.params.rows:h,this.search()},rowsProvider:function(t,e){var s=this;this.search().then((function(t){e(s.searchResults)})).catch((function(t){e([])}))},search:function(){var t=this;return u(n.a.mark((function e(){var s,a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=(t.currentPage-1)*t.rowsPerPage,e.next=4,o["l"](t.query,s,t.rowsPerPage,t.categoryFilters,t.taxonFilters);case 4:a=e.sent,t.searchResults.length=0,t.facetCategories={},Object.keys(a.facet_counts.category).forEach((function(e){-1===t.categoryFilters.indexOf(e)&&(t.facetCategories[e]=a.facet_counts.category[e])})),t.facetTaxons=a.facet_counts.taxon_label,t.numFound=a.numFound,a.docs.forEach((function(e,s){var r=a.highlighting[e.id],i=Object(c["a"])(e.category),n={category:i,taxon:e.taxon_label,label:e.label[0],curie:e.id,rows:t.rows,highlight:r.highlight,toLink:"/"+i+"/"+e.id,match:r.match,hasHighlight:r.has_highlight};t.searchResults.push(n)})),e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})))()}}},f=d,g=(s("3de7"),s("2877")),v=Object(g["a"])(f,a,r,!1,null,null,null);e["default"]=v.exports},"3de7":function(t,e,s){"use strict";var a=s("c371"),r=s.n(a);r.a},c371:function(t,e,s){}}]);
//# sourceMappingURL=search.24f0d610.js.map